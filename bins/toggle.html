<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8" />
	<title>CSS toggle test</title>
	<script type="text/javascript" src="../resources/stuquery.js"></script>
	<style>
	
	/* Reset http://meyerweb.com/eric/tools/css/reset/ v2.0 | 20110126 License: none (public domain) */
	html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0;padding: 0;border: 0;font-size: 100%;font: inherit;vertical-align: baseline;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box; }
	/* HTML5 display-role reset for older browsers */
	article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; }
	body { line-height: 1em; }
	ol, ul { list-style: none; }
	blockquote, q { quotes: none; }
	blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; }
	table { border-collapse: collapse; border-spacing: 0; }
	/* apply a natural box layout model to all elements */
	*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
	/* End of reset */


	body { font-family: Tahoma, Arial, sans-serif; padding: 1em; font-size: 16px; line-height: 1.25em; }
	h1 { font-size: 1.4em; font-weight: bold; line-height: 1.4em; margin-bottom: 0.5em; }
	.row { line-height: 2em; position: relative; margin-bottom: 1em; }
	li { line-height: 2em; padding: 0.5em 0; position: relative; border-bottom: 1px solid #ddd; }
	li:first-child { padding-top: 0; }
	li:last-child { padding-bottom: 0; border-bottom: 0px; }
	label { font-weight: bold; display: inline-block; width: 100%; cursor: pointer; }
	legend { margin-bottom: 1em; }

	.switch { width: 5em; position: absolute; display: inline-block; right: 0px; }
	.switch input { position: absolute; opacity: 0; z-index: 3; width: 100%; height: 100%; margin: 0px; cursor: pointer; }
	.switch input:focus ~ span { box-shadow: 0 1px 1px #65727b, 0 0 1px #b6bdc2, 0 0 4px 2px #3366dd; }
	.switch input:checked + span { background-color: #67E767; color: black; }
	.switch input:checked + span a { left: 100%; border-color: #67E767; margin-left: -2em; right: 0%; }
	.switch input:checked + span span:first-of-type { opacity: 0; }
	.switch input:checked + span span:last-of-type { opacity: 1; }
	.switch a { left: 0; top: 0; width: 2em; height: 2em; background-color: #fff; border-radius: 100%; border: 0.25em solid #dddddd; transition: all .2s ease-out; position: absolute; right: 50%; top: 0; z-index: 1; display: block; padding: 0; }
	.switch > span { display: block; width: 100%; height: 2em; background-color: #dddddd; border-radius: 1.75em; transition: all .4s ease-out; position: relative; overflow: hidden; display: block; min-height: 2em; padding: 0; text-align: left; line-height: 2em; box-sizing: border-box; }
	.switch > span span { text-align: center; display: block; position: absolute; top: 0; left: 0; width: 100%; opacity: 0; transition: all .2s ease-out; box-sizing: border-box; }
	.switch > span span:last-of-type { padding-right: 2em; }
	.switch > span span:first-of-type { opacity: 1; padding-left: 2em; color: black; }

	.switch.radio { width: 100%; right: auto; position: relative; height: 3em; }
	.switch.radio label { font-weight: normal; line-height: 3em; font-weight: bold; }
	.switch.radio a, .switch.radio > div { border-radius: 2em; }
	.switch.radio a { width: 50%; width: calc(50% - 0.5em); border: 0px; height: 2.5em; margin: 0.25em; border-color: #444; z-index: 1; position: absolute; z-index: 0; left: 0px; }
	.switch.radio input { opacity: 0; width: 50%; }
	.switch.radio input + input { left: 50%; }
	.switch.radio input:focus ~ div { box-shadow: 0 1px 1px #65727b, 0 0 1px #b6bdc2, 0 0 4px 2px #3366dd; }
	.switch.radio > div { background-color: #444; height: 3em; color: white; position: relative; z-index: 5; }
	.switch.radio > div label { text-align: center; padding: 0; width: 50%; z-index: 2; position: absolute; }
	.switch.radio div > label:first-of-type { opacity: 1; z-index: 2; left: 50%; padding: 0px; }
	.switch.radio div > label:last-of-type { opacity: 1; z-index: 2; left: 0%; padding: 0px; color: black; }
	.switch.radio input:checked + div { background-color: #67E767; color: black; }
	.switch.radio input:checked + div a { left: 50%; margin-left: 0.25em; right: auto; }
	.switch.radio input:checked + div label:first-of-type { color: black; }
	.switch.radio input:checked + div label:last-of-type { color: black; }
	
	</style>
</head>
<body>

	<h1>CSS toggle test</h1>
	<form>
		<div class="row">
			<fieldset>
				<legend>Select the type of container/bin</legend>
				<div class="switch radio">
					<input type="radio" id="waste" name="tag-type" checked="checked" />
					<input type="radio" id="recycling" name="tag-type" />
					<div><label for="recycling" title="Recycling is used for a container or centre that accepts waste for recycling, and donations of used goods.">Recycling</label><label for="waste" title="A single small container for depositing rubbish that is easily accessible for pedestrians.">Waste</label><a></a></div>
				</div>
			</fieldset>
		</div>
		<fieldset id="toggles-recycling">
			<legend>Select any recycling types that this container/bin allows</legend>
			<ul>
				<div class="loader" style="text-align:center;">
					<img src="odi.svg" />
					<br />Loading...
				</div>
			</ul>
		</fieldset>
		<fieldset id="toggles-waste">
			<legend>Select any waste types that this container/bin allows</legend>
			<ul>
				<div class="loader" style="text-align:center;">
					<img src="odi.svg" />
					<br />Loading...
				</div>
			</ul>
		</fieldset>
	</form>

	<script>
	var taglist;

	S(document).ajax("taglist.json",{
		"dataType": "json",
		"success": function(d){
			taglist = d;
			var html = {'waste':'','recycling':''};
			for(tag in taglist){
				t = tag.replace(/:/g,"-").replace(/=/g,"-");
				category = (tag.indexOf('recycling')==0 ? 'recycling' : (tag.indexOf('waste')==0 ? 'waste' : ''));
				html[category] += '<li class="'+category+'"><label for="'+t+'-toggle">'+taglist[tag].label+'</label><div class="switch"><input type="checkbox" id="'+t+'-toggle"><span><span aria-hidden="true">No</span><span aria-hidden="true">Yes</span><a></a></span></div></li>';
			}
			for(cat in html){
				S('#toggles-'+cat+' ul').html(html[cat]);
			}
			toggleOptions('waste');
		}
	});
	
	function toggleOptions(cat){
		if(cat == "recycling"){
			S('#toggles-recycling').css({'display':''});
			S('#toggles-waste').css({'display':'none'});
		}else{
			S('#toggles-recycling').css({'display':'none'});
			S('#toggles-waste').css({'display':''});
		}
	}
	
	S('.switch.radio input').on('change',function(e){
		toggleOptions(e.currentTarget.getAttribute('id'));
	});
	</script>

</body>
</html>